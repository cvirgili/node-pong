var player=function(a,c){this.number=a;this.socket=c;this.socket.forceNew=!0;this.zt=new ZingTouch.Region(document.body);this.initSocket();this.getTouchPosition()};
player.prototype.initSocket=function(){var a=this.socket,c=this.number;document.getElementById("surface").style.opacity=1;a.emit("playerconnected",c);document.getElementById("messages").innerText="connected";this.socket.on("connect",function(){});this.socket.on("error",function(){document.getElementById("messages").innerText="error";a.close()});this.socket.on("close",function(){document.getElementById("messages").innerText="close";a.close()});this.socket.on("end",function(){a.close()});this.socket.on("resetclients",
function(){a.close()});this.socket.on("disconnect",function(){document.getElementById("messages").innerText="CONNESSIONE CHIUSA";document.getElementById("surface").style.opacity=0;a.close()});this.socket.on("goal",function(a){document.getElementById("points").innerText=a.point1+" : "+a.point2;c==a.n?document.getElementById("messages").innerText="TAP TO START":document.getElementById("messages").innerText=""})};
player.prototype.getTouchPosition=function(){var a=this.socket,c=this.number,f=document.getElementById("surface");zt.bind(f,"tap",start);this.zt.bind(f,"pan",function(d){a.emit("player",{n:c,y:getYPosition(d)})})};player.prototype.getYPosition=function(a){a=a.detail.events[0].clientY/window.innerHeight*6-3;-3>a&&(a=-3);3<a&&(a=3);return-a};
player.prototype.getAccelerometer=function(){function a(a,d){var b=a.y;b=b/10*3;-3>b&&(b=-3);3<b&&(b=3);c.emit("player",{n:f,y:b});b="[X, Y, Z]".replace("X",a.x&&a.x.toFixed(3));b=b.replace("Y",a.y&&a.y.toFixed(3));b=b.replace("Z",a.z&&a.z.toFixed(3));document.getElementById(d).innerHTML=b}var c=this.socket,f=this.number;if("Accelerometer"in window&&"Gyroscope"in window){document.getElementById("messages").innerHTML="Generic Sensor API";var d=new Accelerometer;d.addEventListener("reading",function(c){return a(d,
"moAccel")});d.start();var g=new Accelerometer({includeGravity:!0});g.addEventListener("reading",function(c){return a(g,"moAccelGrav")});g.start();var e=new Gyroscope;e.addEventListener("reading",function(a){return rotationHandler({alpha:e.x,beta:e.y,gamma:e.z})});e.start();intervalHandler("Not available in Generic Sensor API")}else"DeviceMotionEvent"in window?(document.getElementById("messages").innerHTML="Device Motion API",window.addEventListener("devicemotion",function(c){a(c.accelerationIncludingGravity,
"messages")},!1)):document.getElementById("messages").innerHTML="No Accelerometer \x26 Gyroscope API available"};