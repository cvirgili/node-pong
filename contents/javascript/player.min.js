var player=function(a,d){this.number=a;this.socket=d;this.socket.forceNew=!0;this.zt=new ZingTouch.Region(document.body);this.initSocket();this.getTouchPosition()};
player.prototype.initSocket=function(){var a=this.socket,d=this.number,e=this.zt,b=function(){a.emit("start",d);document.getElementById("messages").innerText="";e.unbind(surface,"tap",b)};document.getElementById("surface").style.opacity=1;a.emit("playerconnected",d);document.getElementById("messages").innerText="connected";this.socket.on("connect",function(){});this.socket.on("error",function(){document.getElementById("messages").innerText="error";a.close()});this.socket.on("close",function(){document.getElementById("messages").innerText=
"close";a.close()});this.socket.on("end",function(){a.close()});this.socket.on("resetclients",function(){a.close()});this.socket.on("disconnect",function(){document.getElementById("messages").innerText="CONNESSIONE CHIUSA";document.getElementById("surface").style.opacity=0;a.close()});this.socket.on("goal",function(a){document.getElementById("points").innerText=a.point1+" : "+a.point2;d==a.n?(document.getElementById("messages").innerText="TAP TO START",e.bind(surface,"tap",b)):document.getElementById("messages").innerText=
""})};player.prototype.getTouchPosition=function(){var a=this.socket,d=this.number,e=document.getElementById("surface");this.zt.bind(e,"pan",function(b){b=b.detail.events[0].clientY/window.innerHeight*6-3;-3>b&&(b=-3);3<b&&(b=3);a.emit("player",{n:d,y:-b})})};
player.prototype.getAccelerometer=function(){function a(a,b){var c=a.y;c=c/10*3;-3>c&&(c=-3);3<c&&(c=3);d.emit("player",{n:e,y:c});c="[X, Y, Z]".replace("X",a.x&&a.x.toFixed(3));c=c.replace("Y",a.y&&a.y.toFixed(3));c=c.replace("Z",a.z&&a.z.toFixed(3));document.getElementById(b).innerHTML=c}var d=this.socket,e=this.number;if("Accelerometer"in window&&"Gyroscope"in window){document.getElementById("messages").innerHTML="Generic Sensor API";var b=new Accelerometer;b.addEventListener("reading",function(d){return a(b,
"moAccel")});b.start();var g=new Accelerometer({includeGravity:!0});g.addEventListener("reading",function(b){return a(g,"moAccelGrav")});g.start();var f=new Gyroscope;f.addEventListener("reading",function(a){return rotationHandler({alpha:f.x,beta:f.y,gamma:f.z})});f.start();intervalHandler("Not available in Generic Sensor API")}else"DeviceMotionEvent"in window?(document.getElementById("messages").innerHTML="Device Motion API",window.addEventListener("devicemotion",function(b){a(b.accelerationIncludingGravity,
"messages")},!1)):document.getElementById("messages").innerHTML="No Accelerometer \x26 Gyroscope API available"};